# PRD: sunny가 클레어 작업한거 무단복제홈

생성 일시: 2025년 12월 5일 오후 5:00
status: backlog
최종 편집 일시: 2025년 12월 9일 오전 11:45
sprint: n2025-11
Assigned To: Claire Kang
Jira: https://zigbang.atlassian.net/browse/HGNN-12288
Status: Not started
engineering team: HGNN

# 1. 프로젝트 개요

## 배경

- '살아본 이야기' 게시판에 첫눈 관련 게시물이 올라올 때 사진 업로드량이 급증하는 현상 발견 ([슬랙 링크](https://zigbang.slack.com/archives/C020N8ZKBPB/p1732772295891269))
- 사용자들이 자발적으로 단지 사진을 공유하는 자연스러운 트렌드 확인
- alan이 Antigravity로 감성적인 사진전 형태의 HTML 프로토타입 제작
    - 호갱노노 살아본 이야기 사진 게시물 중, '좋아요' 상위 200개 기준으로 프로토타입 제작 (참고용)
    - 살아본 이야기 게시판에 올린 사진을 스크래핑해 별도의 사진전 페이지로 구성
- 초기 계획은 첫눈 사진전 핫픽스 적용하여 고객의 반응을 보는 것이었으나, 더 넓은 목표로 전환

## 목표

- **주요 목표**: 단지 내 사진 게시물 업로드 활성화 및 단지 탐색 증가
    - 사진전 형태의 콘텐츠 제공을 통해 사용자 흥미 유발
    - 단지/게시물로 랜딩 유도 → 커뮤니티 활성화
    - 사진 업로드 동기 부여 및 단지 탐색 행동 증가
- **부가 목표**: SDD(Spec-Driven Design) 프로젝트 테스트
    - MD 형태의 PRD 문서를 AI 툴로 개발하여 빠른 배포 프로세스 검증
    - 스펙드리븐 개발 워크플로우의 효율성 및 실현 가능성 테스트

---

# 2. 개발 요구사항

## 2.1 사진전 웹 페이지 구현

### 기능명세

- **디자인**: 새롭게 디자인한 작업으로 적용
- **사진전 노출 요소**:
    - 게시물 이미지 (최소 1장 ~ 최대 4장)
        - 이미지 최적화: 썸네일 생성 및 지연 로딩 적용
    - 게시물 제목
        - 제목 표시: 2줄까지 표시, 초과 시 말줄임표(...) 처리
        - 화면 크기에 따라 실제 표시되는 글자수는 달라질 수 있음
    - 게시물 내용
        - 내용 표시: 2줄까지 표시, 초과 시 말줄임표(...) 처리
        - 화면 크기에 따라 실제 표시되는 글자수는 달라질 수 있음
    - 게시된 날짜
        - 날짜 형식: "YYYY-MM-DD일" 형태
- **카드 클릭 동작**: 이미지, 제목, 내용이 포함된 게시물 카드 전체를 클릭 시 해당 '살아본 이야기' 게시물의 원본 상세 페이지로 이동

### 이미지 추출 기준 (AI 처리 조건)

### 데이터 소스 및 필터링

- **데이터 소스**: 호갱노노 '살아본 이야기' 게시판 사진 게시물
    - 데이터베이스 테이블 또는 API를 통해 게시물 데이터 조회
    - 필요한 게시물 정보: 게시물 ID, 단지 ID, 내용, 작성일, 좋아요 수, 이미지 URL 목록
    - 참고: 원본 게시물에는 제목과 태그가 없으며, 제목은 생성하고 태그는 이미지 분석을 통해 매칭함
- **좋아요 기준**: 좋아요 개수 상위 300개 게시물 추출
    - 좋아요 수 기준 내림차순 정렬 후 상위 300개 선택
    - 태그 필터, 기간 필터, 이미지 제외 조건 등을 거쳐 최종적으로 페이지에 노출될 게시물이 30개 미만일 경우, 상위 400개로 확장하여 재필터링
    - 확장 후에도 30개 미만이면 그대로 진행 (최소 10개 이상 확보 목표)
- **태그 필터**: 이미지 분석을 통해 다음 태그 목록과 관련된 이미지를 가진 게시물만 추출
    - 태그 목록: '크리스마스', '눈사람', '트리', '눈', '겨울', '설경', '눈꽃', '장식', '조명', '연말', '12월', '눈 내리는', '크리스마스 장식', '크리스마스 트리', '첫눈'
    - 태그 매칭 방식: AI 이미지 분석을 통해 이미지 내용이 태그 목록 중 하나 이상의 태그와 관련성이 있는 경우 해당 게시물을 추출
    - 예시: 이미지에 크리스마스 트리가 보이면 "크리스마스 트리" 또는 "크리스마스" 태그와 매칭
- **기간 필터**: 2025년 11월 20일 ~ 오늘(배치 실행일)까지 게시된 게시물만 추출
    - 게시물 작성일 기준으로 필터링
    - 시간 범위: 시작일 00:00:00 ~ 종료일 23:59:59 (KST)
- **게시물 내용 필터**: 게시물 내용에 부적절한 콘텐츠(욕설, 비방, 부적절한 텍스트 등)가 포함된 경우 해당 게시물 노출 제외
    - 부적절한 콘텐츠 감지: 기존 콘텐츠 필터링 시스템 활용 또는 AI 기반 텍스트 분석

### 이미지 선별 조건 (AI 이미지 분석)

- **제외 조건**: 다음 조건에 해당하는 이미지는 제외
    - 사람 얼굴이 노출된 사진
    - 특정 브랜드 로고가 보이는 사진 (예: 스타벅스 등)
    - 차량 번호판이 보이는 사진
    - 이미지 품질이 낮은 사진
        - 이미지 손상 여부: 파일 손상 또는 깨짐 현상이 있는 경우 제외
    - 단지와 무관한 사진
        - 단지 외부나 공용 공간과 무관한 사진 (예: 음식 사진, 인테리어만 찍은 사진 등)
- **중복/유사 이미지 처리**: 동일하거나 매우 유사한 이미지가 여러 게시물에 반복되는 경우, 이미지 품질이 가장 좋은 1장만 노출 대상으로 선정하고 나머지는 제거
    - 이미지 유사도 측정: 해시 기반 유사도 검사 또는 AI 기반 이미지 유사도 분석
    - 유사도 임계값: 95% 이상 유사한 경우 중복으로 판단
    - 선정 기준: 해상도가 높고, 흐림도가 낮으며, 이미지 품질 점수가 높은 이미지 우선 선택
- **게시물별 이미지 선택**: 게시물에 여러 장의 사진이 있는 경우, 조건에 맞는 사진만 선택 (최소 1장 ~ 최대 4장)
    - 게시물의 모든 이미지를 위 조건에 따라 필터링
    - 필터링 후 남은 이미지가 1장 이상 4장 이하인 경우: 모두 선택
    - 필터링 후 남은 이미지가 4장 초과인 경우: 이미지 품질 점수 기준 상위 4장 선택
    - 필터링 후 남은 이미지가 없는 경우: 해당 게시물 전체 제외

### 제목 생성 규칙

- **제목 형식**: '단지명 + 대표 태그' 형태로 생성
    - 예시: "강남자곡아이파크의 크리스마스 트리"
    - 단지명은 기존 데이터베이스의 단지명 필드 활용
    - 대표 태그는 태그 필터 목록 중 하나를 선택
- **대표 태그 선정**: 이미지 분석을 통해 태그 필터 목록 중 이미지와 가장 잘 맞는 태그를 AI가 선정
    - 이미지 내용을 AI가 분석하여 태그 필터 목록의 태그들과 의미적 유사도를 계산
    - 가장 높은 유사도를 가진 태그를 대표 태그로 선정
    - 게시물 내용에서 키워드를 추출하여 태그 필터 목록과 매칭한 결과도 참고하여 선정
    - ~~매칭되는 태그가 없는 경우: 가장 일반적인 태그(예: "겨울")를 기본값으로 사용~~

### 레이아웃 규칙

- **그리드 레이아웃**: 게시물별 이미지 개수에 따라 자동 배치
    - 1장: 전체 너비 (가로 전체 사용)
        
        피그마 참고: [https://www.figma.com/design/IGj4m8HIT4uEaK3gpSzaQQ/Aldo_sprint?node-id=13152-12744&t=F9Kaaq9R0znMGXcz-4](https://www.figma.com/design/IGj4m8HIT4uEaK3gpSzaQQ/Aldo_sprint?node-id=13152-12744&t=F9Kaaq9R0znMGXcz-4)
        
    - 2장: 2열 (좌우로 나란히 배치, 각 50% 너비)
        
        피그마 참고: [https://www.figma.com/design/IGj4m8HIT4uEaK3gpSzaQQ/Aldo_sprint?node-id=13152-12752&t=F9Kaaq9R0znMGXcz-4](https://www.figma.com/design/IGj4m8HIT4uEaK3gpSzaQQ/Aldo_sprint?node-id=13152-12752&t=F9Kaaq9R0znMGXcz-4)
        
    - 3장: 1장이 2/3 너비를 차지하고, 나머지 1/3을 위아래로 50%씩 나눠서 배치 (좌측 1장 2/3 너비, 우측 상하 2장 각 1/3 너비)
        
        피그마 참고: [https://www.figma.com/design/IGj4m8HIT4uEaK3gpSzaQQ/Aldo_sprint?node-id=13152-12760&t=F9Kaaq9R0znMGXcz-4](https://www.figma.com/design/IGj4m8HIT4uEaK3gpSzaQQ/Aldo_sprint?node-id=13152-12760&t=F9Kaaq9R0znMGXcz-4)
        
    - 4장: 2x2 그리드 (상하 2행, 좌우 2열로 배치, 각 50% 너비)
        
        피그마 참고: [https://www.figma.com/design/IGj4m8HIT4uEaK3gpSzaQQ/Aldo_sprint?node-id=13152-12768&t=F9Kaaq9R0znMGXcz-4](https://www.figma.com/design/IGj4m8HIT4uEaK3gpSzaQQ/Aldo_sprint?node-id=13152-12768&t=F9Kaaq9R0znMGXcz-4)
        
    - 이미지 비율: 모든 이미지는 동일한 비율로 크롭 또는 패딩 처리
- **게시물 카드 레이아웃**: 각 게시물은 카드 형태로 표시

### 데이터 갱신 및 노출

- **갱신 주기**: 하루 1회 자정 기준으로 배치 실행하여 최신 데이터로 갱신
    - 배치 실행 시간: 매일 00:00 (KST)
    - 배치 실행 후 데이터베이스 또는 캐시에 저장
    - 배치 실행 실패 시: 이전 데이터 유지, 에러 로그 기록
    - 배치 실행 결과: 노출 대상 게시물이 10개 미만일 경우 이전 데이터 유지, 에러 로그 기록
- **랜덤 노출**: 전체 노출 대상이 되는 게시물 풀에서 랜덤 순서로 노출
    - 사용자가 사진전에 진입할 때마다 새로운 순서로 사진들이 표시되도록 함
    - 랜덤 시드: 사용자 세션 ID
    - 동일 세션 내에서는 동일한 순서 유지

### 동작

- **카드 클릭**: 게시물 카드(이미지, 제목, 내용 포함) 전체를 클릭 시 해당 '살아본 이야기' 게시물의 상세 페이지로 이동
    
    피그마 참고: [https://www.figma.com/design/IGj4m8HIT4uEaK3gpSzaQQ/Aldo_sprint?node-id=13152-14838&t=F9Kaaq9R0znMGXcz-4](https://www.figma.com/design/IGj4m8HIT4uEaK3gpSzaQQ/Aldo_sprint?node-id=13152-14838&t=F9Kaaq9R0znMGXcz-4)
    
    - 이동 시 필요한 정보: 게시물 ID
    - URL 형식: 기존 '살아본 이야기' 게시물 상세 페이지 URL 구조 유지
    - 카드 전체가 클릭 가능 영역으로 설정되어야 함
- **뒤로 가기**: 게시물 상세에서 뒤로 가기 버튼 클릭 시 사진전 페이지로 복귀
- **페이지 스크롤**: 무한 스크롤 또는 페이지네이션 방식으로 추가 게시물 로드
    - 초기 로드: 최대 10개 게시물
    - 추가 로드: 스크롤 하단 도달 시 다음 10개 게시물 로드
- **로딩 상태**:
    - 탭 선택 시 페이지 로딩 중: 스켈레톤 UI 표시 (게시물 카드 형태의 스켈레톤 이미지)
        
        피그마 참고: [https://www.figma.com/design/IGj4m8HIT4uEaK3gpSzaQQ/Aldo_sprint?node-id=13152-15152&t=F9Kaaq9R0znMGXcz-4](https://www.figma.com/design/IGj4m8HIT4uEaK3gpSzaQQ/Aldo_sprint?node-id=13152-15152&t=F9Kaaq9R0znMGXcz-4)
        
- **에러 처리**: 이미지 로드 실패 시 기본 이미지 표시
    
    피그마 참고: [https://www.figma.com/design/IGj4m8HIT4uEaK3gpSzaQQ/Aldo_sprint?node-id=13152-15167&t=F9Kaaq9R0znMGXcz-4](https://www.figma.com/design/IGj4m8HIT4uEaK3gpSzaQQ/Aldo_sprint?node-id=13152-15167&t=F9Kaaq9R0znMGXcz-4)
    
    - 참고: 이미지 로드 실패 시 처리 방식은 추가 정의 필요

---

## 2.2 노출 방식 및 진입점

- 1안과 2안 모두 **이야기 탭 내 상단 탭 추가**를 공통 전제로 하되, 리소스 관점에서 **최소 구현안 vs 고도화 안**으로 구분
- **MVP는 리소스와 상관없이 1안(최소 구현안)으로 개발 진행**
- 2안은 추후 고도화를 위한 참고용으로 남겨두며, 본 스프린트에서는 1안으로 개발 진행

### 1안: 고정형 (1회성, 최소 구현안)

- 탭명과 테마가 고정되어 있어 시즌/테마 변경 시 앱 재배포 필요

### 기능명세

- **노출 위치**: 이야기 메뉴의 상단 탭 영역
    
    피그마 참고: [https://www.figma.com/design/IGj4m8HIT4uEaK3gpSzaQQ/Aldo_sprint?node-id=13126-13700&t=F9Kaaq9R0znMGXcz-4](https://www.figma.com/design/IGj4m8HIT4uEaK3gpSzaQQ/Aldo_sprint?node-id=13126-13700&t=F9Kaaq9R0znMGXcz-4)
    
    - 현재 탭 구성: 전체, 부동산이야기, 살아본 이야기
    - 신규 탭 추가: '겨울 사진전' 탭 (이벤트성, 고정 탭명)
    - 탭 순서: 전체 → 겨울 사진전 → 부동산이야기 → 살아본 이야기
    - 탭 스타일: 기존 탭과 동일한 디자인 시스템 적용
- **탭명**: '겨울 사진전'으로 고정
    - 시즌/테마 변경(크리스마스, 1월 이야기 등) 시 앱 재배포 필요
- **탭 클릭 동작**:
    - 탭 클릭 시 사진전 페이지로 이동
        
        피그마 참고: [https://www.figma.com/design/IGj4m8HIT4uEaK3gpSzaQQ/Aldo_sprint?node-id=13152-4273&t=F9Kaaq9R0znMGXcz-4](https://www.figma.com/design/IGj4m8HIT4uEaK3gpSzaQQ/Aldo_sprint?node-id=13152-4273&t=F9Kaaq9R0znMGXcz-4)
        
    - 페이지 URL: 개발팀에서 설정 필요
    - 페이지 로딩 중: 스켈레톤 UI 표시 (게시물 카드 형태의 스켈레톤 이미지)

---

### 2안: 운영형 (재활용 가능, 고도화 안)

- 탭명, 테마, 노출 제어 등을 운영 설정값으로 관리하여 재배포 없이 변경 가능

### 기능명세

- **노출 위치**: 이야기 메뉴의 상단 탭 영역 (1안과 동일)
- **탭 노출 제어**: 기능은 선 배포하되, 게시 가능한 사진이 일정 기준 이상 확보된 시점에 탭 노출 ON/OFF 가능
- **탭명 변경 가능**: 시즌/테마에 따라 탭명을 변경할 수 있어야 함
    - 예시: 겨울 사진전 → 설날 사진전 → 봄 사진전
- **테마별 링크 변경 가능**: 탭 클릭 시 연결되는 사진전 페이지(스크래핑 대상 테마)를 변경할 수 있어야 함
    - 예시: 눈 테마 페이지 → 설날 테마 페이지 → 봄 테마 페이지
- **탭 컬러 변경 가능**: 시즌/테마에 맞춰 상단 탭의 컬러(또는 스타일)를 조정

---

### 게이트웨이 팝업 노출 (운영 선택사항)

### 기능

- **노출 위치**: 게이트웨이 팝업
    - 기존 게이트웨이 팝업 시스템 활용
- **이벤트 시작일 노출**: 사진전 게시일에 맞춰 팝업이 노출되도록 설정
    - 노출 시작일: 사진전 오픈일
    - 노출 종료일: 운영 정책에 따라 결정
- **연결 경로**: 팝업 클릭 시 겨울 사진전 탭 페이지로 이동

### 참고 사항 (광고팀 논의 필요)

- 기존 광고 팝업/배너을 내리고 겨울 사진전 배너를 노출했을 때 광고 수익/운영 측면에서 이슈가 없는지 확인 필요

---

# 3. ZAMS

- **Key Metric**
    - 게이트웨이 팝업 노출대비 클릭률 (CTR)
    - 사진전 상단 탭 진입 클릭률
    - 사진전 페이지 노출 수
    - 사진 클릭 → 이야기 게시물 상세 클릭 수 (CTR)
    - 사진 등록 비율 변화 (사진전 오픈 전 2주 vs 오픈 후 2주)
    - 사진 게시물 업로드 증가율
- **Guardrail Metric (가드레일 지표)**
    - 사진전 도입 전/후 이야기 탭 내 기존 콘텐츠(부동산 이야기, 살아본 이야기) 조회수, 작성수 변화

[사진전](https://www.notion.so/2c4db1fe809480a48f94c0af87ae8645?pvs=21) by Dulee
